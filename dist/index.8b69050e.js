const e=["O","PG","AAPL"].join(",");const n=function(){const e=new Date;return`${String(e.getDate()).padStart(2,"0")}/${String(e.getMonth()+1).padStart(2,"0")}/${String(e.getFullYear())}`};const t=new class{constructor(e,n,t){this.accountName=e,this.portfolio=[],this.fundsAvailable=n,this.fundsInvested=t,this.currency=["USD","$"],this.movementHistory=[],this.tradeHistory=[]}}("Chris Evans",0,0);class i{constructor(e,n,t,i,s,c){this.investmentShareName=e,this.investmentSharePrice=n,this.investmentTicker=t,this.totalNumShares=+i,this.investmentInitValue=s,this.investmentID=c}}const s=function(e,n,t,s,c,o){return new i(e,n,t,s,c,o)},c=function(e){const n=[];return e.forEach((function(e){const[t]=e.slice(0,1),i=e.slice(1),s=i.map((function(e){return e.investmentSharePrice})).reduce((function(e,n){return e+n}))/i.length,c=i.map((function(e){return e.totalNumShares})).reduce((function(e,n){return e+n})),o=i.map((function(e){return e.investmentInitValue})).reduce((function(e,n){return e+n})),a={objectID:t,objectAvgSharePrice:s.toFixed(2),objectNumShares:c.toFixed(2),objectInvested:o.toFixed(2)};n.push(a)})),n},o=document.querySelector(".view-container"),a=function(e){e.forEach((function(e){o.insertAdjacentHTML("beforeend",`<div class="share" id="${e.ticker}">\n            <div class="share-info">\n\n              <div class="share-name">\n                <h3 class="heading-3">${e.name}</h3>\n              </div>\n\n              <div class="share-ticker">\n                <h3 class="heading-3">${e.ticker}</h3>\n              </div>\n\n              <div class="share-price">\n                <h3 class="heading-3">$${e.price}</h3>\n              </div>\n            </div>\n\n            <div class="share-view">\n              <button class="btn btn-dark">View</button>\n            </div>\n          </div>`)}))},r=document.querySelector(".popup"),d=document.querySelector(".overlay"),l=document.querySelector(".details-navigation"),u=document.querySelector(".details-back-icon"),v=(document.querySelector("#btn-buy-text"),function(){r.classList.add("hidden"),d.classList.add("hidden")}),m=function(){r.classList.remove("hidden"),d.classList.remove("hidden")},f=function(e,n){const t=n.find((function(n){return n.ticker===e})),i=`\n  <div class="details-container">\n    <div class="details-logo">\n      <img\n        class="details-logo-file"\n        src="External Content/AppleLogo.png"\n      />\n    </div>\n\n    <div class="details-info details-name">\n      <p class="main-text">Name:</p>\n      <p class="main-text" id="stockName">${t.name}</p>\n    </div>\n\n    <div class="details-info details-ticker">\n      <p class="main-text">Ticker:</p>\n      <p class="main-text" id="tickerSymbol">${t.ticker}</p>\n    </div>\n\n    <div class="details-info details-price">\n      <p class="main-text">Share Price:</p>\n      <p class="main-text" id="sharePrice">$${t.price}</p>\n    </div>\n\n    <div class="details-info details-day-low">\n      <p class="main-text">Day Low:</p>\n      <p class="main-text" id="dayLow">$${t.day_low}</p>\n    </div>\n\n    <div class="details-info details-day-high">\n      <p class="main-text">Day High:</p>\n      <p class="main-text" id="dayHigh">$${t.day_high}\n      </p>\n    </div>\n\n    <div class="details-info details-market">\n      <p class="main-text">Market:</p>\n      <p class="main-text" id="market">${t.exchange_short}\n      </p>\n    </div>\n\n    <div class="details-info details-marketcap">\n      <p class="main-text">Market Cap:</p>\n      <p class="main-text" id="marketCap">${function(e){let n="";return e>999999999999?(n=`$${(e/1e12).toFixed(2)}T`,n):e<999999999999?(n=`$${e/1e9}B`,n):void 0}(t.market_cap)}</p>\n    </div>\n\n    <div class="details-info details-52low">\n      <p class="main-text">52 Week-Low:</p>\n      <p class="main-text" id="yearLow">$116.22</p>\n    </div>\n\n    <div class="details-info details-52high">\n      <p class="main-text">52 Week-High:</p>\n      <p class="main-text" id="yearHigh">$182.71</p>\n    </div>\n  </div>\n\n  <div class="details-btn btn-buy" id="btn-buy">\n          <button class="btn btn-dark btn-buy-text" id="btn-buy-text">Buy shares</button>\n  </div>\n`;u.classList.add("hidden"),l.insertAdjacentHTML("afterend",i)},h=function(){const e=document.querySelector(".details-container"),n=document.querySelector(".btn-buy");e&&n&&(e.remove(),n.remove())},p=document.querySelector(".details-back-icon"),b=(document.querySelector("#btn-buy-text"),document.querySelector(".details-navigation")),y=function(){const e=document.querySelector(".buy-container"),n=document.querySelector(".btn-purchase");e&&n&&(e.remove(),n.remove())},g=document.querySelector(".details-navigation"),S=document.querySelector(".popup"),L=document.querySelector(".details-back-icon"),x=document.querySelector(".overlay"),k=function(){const e=document.querySelector(".deposit-container"),n=document.querySelector(".deposit-error-message");if(!e)return e&&n?(e.remove(),void n.remove()):void 0;e.remove()},q=document.querySelector(".details-navigation"),$=document.querySelector(".popup"),w=document.querySelector(".details-back-icon"),A=document.querySelector(".overlay"),E=function(e){const n=`\n    <p class="main-text deposit-error-message">${e}</p>\n    `,t=document.querySelector(".withdraw-container");return t?void t.insertAdjacentHTML("beforeend",n):void 0},H=function(){const e=document.querySelector(".withdraw-container"),n=document.querySelector(".withdraw-error-message");if(!e)return e&&n?(e.remove(),void n.remove()):void 0;e.remove()},j=document.querySelector(".view-nav"),I=document.querySelector(".view-container"),P=document.querySelector(".view-nav-left"),T=document.querySelector(".view-nav-right"),D=function(e){e.forEach((function(e){I.insertAdjacentHTML("beforeend",`\n        <div class="movement">\n            <div class="movement-info">\n\n            <div class="movement-date">\n                <h3 class="heading-3">${e.date}</h3>\n            </div>\n\n            <div class="movement-type">\n                <h3 class="heading-3">${e.movement<0?"WITHDRAWAL":"DEPOSIT"}</h3>\n            </div>\n\n            <div class="movement-amount">\n                <h3 class="heading-3">${e.movement<0?`-$${Math.abs(e.movement)}`:`$${e.movement}`}</h3>\n            </div>\n            </div>\n        </div>\n        `)}))},M=function(){Array.from(I.childNodes).forEach((function(e){e.remove()}))},N=function(e){const n=document.querySelector(".portfolio");e.forEach((function(e){n.insertAdjacentHTML("beforeend",`\n        <div class="investment-group" id="${e.objectID}">\n            <div class="investment-group-name">\n                <p class="main-text center-text">${e.objectID}</p>\n            </div>\n\n            <div class="investment-group-price">\n                <p class="main-text center-text">$${e.objectAvgSharePrice}</p>\n            </div>\n\n            <div class="investment-group-numshares">\n                <p class="main-text center-text">${e.objectNumShares}</p>\n            </div>\n\n            <div class="investment-group-invested">\n                <p class="main-text center-text">$${e.objectInvested}</p>\n            </div>\n\n            <div class="investment-group-button">\n                <svg class="investment-group-icon   chevron-down">\n                    <use xlink:href="CSS/chevrons.svg#icon-chevron-small-down">\n                    </use>\n                </svg>\n\n                <svg class="investment-group-icon chevron-up icon-contract">\n                    <use xlink:href="CSS/chevrons.svg#icon-chevron-small-up">\n                    </use>\n                </svg>\n            </div>\n\n            <div class="investment-container" id=${e.objectID}>\n            </div>\n        </div>\n        `)}))},C=document.querySelector(".view-container"),F=document.querySelector(".view-nav"),V=document.querySelector(".view-nav-right"),O=function(){C.insertAdjacentHTML("beforeend",'\n    <div class="portfolio">\n        <div class="portfolio-headings">\n            <div class="portfolio-headings-name">\n                <h4 class="heading-4 center-text">Share:</h4>\n            </div>\n\n            <div class="portfolio-headings-price">\n                <h4 class="heading-4 center-text">Price:</h4>\n            </div>\n\n            <div class="portfolio-headings-numshares">\n                <h4 class="heading-4 center-text">No. Shares:</h4>\n            </div>\n\n            <div class="portfolio-headings-invested">\n                <h4 class="heading-4 center-text">Invested:</h4>\n            </div>\n\n            <div class="portfolio-headings-blank">\n                <svg class="portfolio-headings-icon">\n                    <use xlink:href="CSS/chevrons.svg#icon-chevron-small-down"></use>\n                </svg>\n            </div>\n        </div>\n    </div>\n  ')},W=document.querySelector(".details-navigation"),z=document.querySelector(".details-back-icon"),U=document.querySelector(".popup"),_=document.querySelector(".overlay"),B=document.querySelector(".details-close-icon"),Y=document.querySelector(".details-back-icon"),G=(document.querySelector("#btn-buy-text"),document.querySelector("#btnDeposit")),R=document.querySelector("#btnWithdraw"),X=document.querySelector("#btnAccount"),K=document.querySelector(".view-nav-back-icon"),J=document.querySelector("#btnMovements"),Q=document.querySelector("#btnTrades"),Z=document.querySelector("#btnPortfolio"),ee=e,ne=await async function(e){try{const n=await fetch(`https://api.stockdata.org/v1/data/quote?symbols=${e}&api_token=seOqbX0SsFtFXcPVRPL28UfKEzVFF5z8NqGpLuSz`),t=await n.json();return t.data}catch(e){console.error(e)}}(ee);a(ne);const te=function(){var e,n,i;e=t.fundsAvailable.toFixed(2),document.querySelector("#funds-available").textContent=e,n=t.fundsInvested.toFixed(2),document.querySelector("#funds-invested").textContent=n,i=(t.fundsAvailable+t.fundsInvested).toFixed(2),document.querySelector("#current-value").textContent=i};let ie;te();document.addEventListener("click",(function(e){return e.target.classList.contains("btn")?(ie=e.target.closest(".share").id,m(),f(ie,ne),ie):void 0}));const se=function(){v(),h(),y(),k(),H(),function(){const e=document.querySelector(".sell");e&&e.remove()}()};document.addEventListener("keydown",(function(e){"Escape"!==e.key||U.classList.contains("hidden")||se()})),B.addEventListener("click",(function(){se()})),_.addEventListener("click",(function(){U.classList.contains("hidden")||se()}));document.addEventListener("click",(function(e){e.target.classList.contains("btn-buy-text")&&(h(),function(e,n){n.find((function(n){return n.ticker===e})),p.classList.remove("hidden"),b.insertAdjacentHTML("afterend",'\n        <div class="buy-container">\n          <div class="buy-selector">\n            <div class="buy-units unit-selected">\n              <p class="main-text cursor-pointer center-text unit">Units</p>\n            </div>\n            <div class="buy-funds">\n              <p class="main-text cursor-pointer center-text fund">Funds</p>\n            </div>\n\n            <div class="buy-amount">\n              <button class="square-btn" id="buy-less">-</button>\n              <input type="number" class="buy-input" />\n              <button class="square-btn" id="buy-more">+</button>\n            </div>\n          </div>\n\n          <div class="buy-summary">\n            <p class="main-text center-text summary-text"></p>\n          </div>\n        </div>\n\n        <div class="details-btn btn-purchase" id="btn-purchase">\n          <button class="btn btn-dark btn-purchase-text" id="btn-buy-text">Purchase</button>\n        </div>\n    ')}(ie,ne))}));document.addEventListener("click",(function(e){const n=function(){const e=document.querySelector(".buy-units"),n=document.querySelector(".buy-funds");e.classList.add("unit-selected"),n.classList.remove("fund-selected")},t=function(){const e=document.querySelector(".buy-units"),n=document.querySelector(".buy-funds");e.classList.remove("unit-selected"),n.classList.add("fund-selected")};if(e.target.classList.contains("unit")){const i=e.target;i.classList.contains("unit-selected")||n(),i.classList.contains("unit-selected")&&t()}if(e.target.classList.contains("fund")){const i=e.target;i.classList.contains("fund-selected")||t(),i.classList.contains("fund-selected")&&n()}}));const ce=function(e,n){let t=0;const i=e.key;t=+document.querySelector(".buy-input").value.concat(i);const s=ne.find((function(e){return e.ticker===ie})).price*t;return Number.isNaN(t)||function(e,n,t){const i=document.querySelector(".summary-text");0===e&&(i.textContent=""),i.textContent=`Buy ${e} ${n} for $${t}`}(t,ie,s),n<s&&function(e,n){document.querySelector(".summary-text").textContent=`Oops, not enough funds! Deposit $${(e-n).toFixed(2)} more to make stock purchase`}(s,n),s};Y.addEventListener("click",(function(){y(),f(ie,ne)}));document.addEventListener("click",(function(e){if(e.target.classList.contains("btn-purchase-text")){const e=document.querySelector(".buy-input").value,i=ne.find((function(e){return e.ticker===ie})).price,c=t.fundsAvailable;if(e&&e>0){const o=c-e*i>=0?"approved":"rejected";return function(e,t,i,c,o,a){if("approved"===i){const i=e.find((function(e){return e.ticker===c})).name,r=function(e,n){return 0!==e.portfolio.length&&!!e.portfolio.find((function(e){return e[0]===n}))}(t,c),d=o*a,l=Math.floor(1e7*Math.random());if(!1===r){const e=new Array(`${c}`),r=s(i,o,c,a,d,l);e.push(r),t.portfolio.push(e);const u=n();return t.tradeHistory.push({date:u,name:c,type:"Purchase",value:d,shares:a}),t.fundsAvailable=t.fundsAvailable-d,void(t.fundsInvested=t.fundsInvested+d)}if(!0===r){const e=s(i,o,c,a,d,l);t.portfolio.find((function(e){return e[0]===c})).push(e);const r=n();t.tradeHistory.push({date:r,name:c,type:"Purchase",value:d,shares:a}),t.fundsAvailable=t.fundsAvailable-d,t.fundsInvested=t.fundsInvested+d}}}(ne,t,o,ie,i,e),se(),te(),"successful stock purchase"}}}));document.addEventListener("keydown",(function(e){document.querySelector(".buy-container")&&console.log(ce(e,t.fundsAvailable))})),R.addEventListener("click",(function(){$.classList.remove("hidden"),A.classList.remove("hidden"),q.insertAdjacentHTML("afterend",'\n    <div class="withdraw">\n          <div class="withdraw-container">\n            <input\n              type="number"\n              class="withdraw-input"\n              placeholder="Currency will be in USD"\n            />\n            <button class="btn btn-dark withdraw-btn">Withdraw funds</button>\n          </div>\n        </div>\n        '),w.classList.add("hidden")})),document.addEventListener("click",(function(e){if(e.target.classList.contains("withdraw-btn")){let e=function(e){if(e<=t.fundsAvailable&&e>0){const i=t.fundsAvailable,s=e;t.fundsAvailable=i-s;const c=n();return t.movementHistory.push({movement:-s,date:c}),"success"}return e>t.fundsAvailable?"failure-not-enough":"failure-invalid-input"}(document.querySelector(".withdraw-input").value);if("failure-invalid-input"===e&&E("Please enter an amount greater than zero!"),"failure-not-enough"===e&&E("You do not have enough funds to withdraw this much!"),"success"===e)return v(),h(),y(),H(),void te()}})),G.addEventListener("click",(function(){S.classList.remove("hidden"),x.classList.remove("hidden"),g.insertAdjacentHTML("afterend",'\n    <div class="deposit">\n          <div class="deposit-container">\n            <input\n              type="number"\n              class="deposit-input"\n              placeholder="Currency will be in USD"\n            />\n            <button class="btn btn-dark deposit-btn">Add funds</button>\n          </div>\n        </div>\n        '),L.classList.add("hidden")})),document.addEventListener("click",(function(e){if(e.target.classList.contains("deposit-btn")){let e=function(e){if(e>0){const i=t.fundsAvailable,s=e;t.fundsAvailable=i+s;const c=n();return t.movementHistory.push({movement:s,date:c}),"success"}return"error"}(+document.querySelector(".deposit-input").value);if("error"===e)return void function(){const e=document.querySelector(".deposit-container");e&&e.insertAdjacentHTML("beforeend",'\n    <p class="main-text deposit-error-message">Please enter an amount greater than zero!</p>\n    ')}();if("success"===e)return v(),h(),y(),k(),void te()}})),X.addEventListener("click",(function(){j.classList.remove("hidden"),P.classList.remove("hidden"),T.classList.remove("hidden"),Q.classList.remove("btn-dark"),Q.classList.add("btn-light"),J.classList.remove("btn-light"),J.classList.add("btn-dark"),M(),0!==t.movementHistory.length?t.movementHistory.length>0&&D(t.movementHistory):console.log("no history")})),K.addEventListener("click",(function(){j.classList.add("hidden"),M(),a(ne)})),Q.addEventListener("click",(function(){var e;(J.classList.remove("btn-dark"),J.classList.add("btn-light"),Q.classList.remove("btn-light"),Q.classList.add("btn-dark"),M(),0!==t.tradeHistory.length)?t.tradeHistory.length>0&&(e=t.tradeHistory,console.log(e),e.forEach((function(e){I.insertAdjacentHTML("beforeend",`\n        <div class="trade">\n            <div class="trade-info">\n\n            <div class="trade-date">\n                <h3 class="heading-3">${e.date}</h3>\n            </div>\n\n            <div class="trade-name">\n                <h3 class="heading-3">${e.name}</h3>\n            </div>  \n\n            <div class="trade-type">\n                <h3 class="heading-3">${e.type}</h3>\n            </div>\n\n            <div class="trade-shares">\n                <h3 class="heading-3">${e.shares} share${e.shares>1?"s":""}</h3>\n            </div>    \n\n            <div class="trade-amount">\n                <h3 class="heading-3">$${e.value}</h3>\n            </div>\n            </div>\n        </div>\n            `)}))):console.log("no trade history")})),J.addEventListener("click",(function(){Q.classList.remove("btn-dark"),Q.classList.add("btn-light"),J.classList.remove("btn-light"),J.classList.add("btn-dark"),M(),0===t.movementHistory.length&&console.log("no history"),t.movementHistory.length>0&&D(t.movementHistory)}));let oe="";Z.addEventListener("click",(function(){M(),F.classList.remove("hidden"),V.classList.add("hidden"),O(),oe=c(t.portfolio),N(oe)}));let ae="",re="";document.addEventListener("click",(function(e){if(e.target.classList.contains("investment-group-icon")){const n=e.target.closest(".investment-group-button");ae=e.target.closest(".investment-group").id;const i=c(t.portfolio);re=function(e,n){const i=e.find((function(e){return e.objectID==n}));return t.portfolio.find((function(e){return e[0]===i.objectID})).slice(1)}(i,ae),function(e,n){const t=Array.from(document.querySelectorAll(".investment-container")).find((function(e){return e.id===n}));t.classList.toggle("smooth-reveal"),Array.from(t.childNodes).forEach((function(e){e.remove()})),t.classList.contains("smooth-reveal")&&e.forEach((function(e){t.insertAdjacentHTML("beforeend",`\n        <div class="individual-investment ${e.investmentTicker}" id="${e.investmentID}">\n          <div class="individual-investment-date">\n            <p class="main-text center-text">\n              21/01/2022\n            </p>\n          </div>\n          \n          <div class="individual-investment-price">         \n            <p class="main-text center-text">\n              $${e.investmentSharePrice.toFixed(2)}\n            </p>\n          </div>\n          \n          <div class="individual-investment-numshares">    \n            <p class="main-text center-text">\n              ${e.totalNumShares.toFixed(2)}\n            </p>\n          </div>\n          \n          <div class="individual-investment-invested">\n            <p class="main-text center-text">\n              $${e.investmentInitValue.toFixed(2)}\n            </p>\n          </div>\n\n          <div class="individual-investment-sell">\n            <svg class="individual-investment-icon">\n              <use xlink:href="CSS/close-sprite.svg#icon-cross"></use>\n            </svg>\n          </div>\n        </div>\n        `)}))}(re,ae),function(e){const[n,t]=Array.from(e.children);n.classList.toggle("icon-contract"),t.classList.toggle("icon-contract")}(n)}}));let de="",le="";document.addEventListener("click",(function(e){e.target.classList.contains("individual-investment-icon")&&(m(),de=Array.from(e.target.closest(".individual-investment").classList)[1],le=+e.target.closest(".individual-investment").id,W.insertAdjacentHTML("afterend",'\n  <div class="sell">\n    <div class="sell-container">\n        <div class="sell-text">\n            <h3 class="heading-3">Close this position?</h3>\n        </div>\n\n        <div class="sell-buttons">\n            <button class="btn btn-dark" id="btn-confirm-sell">Yes</button>\n\n            <button class="btn btn-light" id="btn-deny-sell">No</button>\n        </div>\n    </div>\n  </div>\n  '),z.classList.add("hidden"))})),document.addEventListener("click",(function(e){if("btn-confirm-sell"===e.target.id){const e=function(e,i){const s=t.portfolio.find((function(n){return n[0]===e})),c=t.portfolio.indexOf(s),o=t.portfolio.find((function(n){return n[0]===e})).slice(1).find((function(e){return e.investmentID===i})),a=s.indexOf(o),r=n();return t.tradeHistory.push({date:r,name:o.investmentTicker,type:"Sale",value:o.investmentSharePrice,shares:o.totalNumShares}),t.fundsAvailable=t.fundsAvailable+o.investmentInitValue,t.fundsInvested=t.fundsInvested-o.investmentSharePrice*o.totalNumShares,2===s.length?(t.portfolio.splice(c,1),"single"):s.length>2?(s.splice(a,1),"multiple"):void 0}(de,le);"single"===e&&(M(),O(),oe=c(t.portfolio),N(oe)),"multiple"===e&&(M(),O(),oe=c(t.portfolio),N(oe)),te(),se()}})),document.addEventListener("click",(function(e){"btn-deny-sell"===e.target.id&&se()}));
//# sourceMappingURL=index.8b69050e.js.map
